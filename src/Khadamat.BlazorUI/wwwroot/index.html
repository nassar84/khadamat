<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Ø®Ø¯Ù…Ø§Øª | Khadamat</title>
    <base href="/" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Tajawal:wght@300;400;500;700;800&display=swap"
        rel="stylesheet">

    <!-- UI Frameworks/Libraries -->
    <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.rtl.min.css" />
    <link rel="stylesheet" href="css/khadamat.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <link rel="icon" type="image/png" href="favicon.png" />
    <link href="Khadamat.BlazorUI.styles.css" rel="stylesheet" />

    <style>
        :root {
            --primary-color: #6366f1;
            --primary-gradient: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            --secondary-color: #f43f5e;
            --bg-glass: rgba(255, 255, 255, 0.7);
            --bg-glass-dark: rgba(15, 23, 42, 0.8);
            --text-main: #1e293b;
            --border-glass: rgba(255, 255, 255, 0.3);

            /* Theme colors - can be overridden dynamically */
            --theme-primary: #6366f1;
            --theme-secondary: #f43f5e;
            --theme-primary-rgb: 99, 102, 241;
            --theme-glow: rgba(99, 102, 241, 0.3);
            --theme-light: rgba(99, 102, 241, 0.1);
        }

        body {
            font-family: 'Tajawal', 'Outfit', sans-serif;
            background-color: #f8fafc;
            color: var(--text-main);
            overflow-x: hidden;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        #app {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .loading-progress {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
        }

        .loading-progress circle {
            fill: none;
            stroke: var(--primary-color);
            stroke-width: 6;
            stroke-linecap: round;
            stroke-dasharray: 1, 200;
            stroke-dashoffset: 0;
            animation: dash 1.5s ease-in-out infinite;
        }

        @keyframes dash {
            0% {
                stroke-dasharray: 1, 200;
                stroke-dashoffset: 0;
            }

            50% {
                stroke-dasharray: 89, 200;
                stroke-dashoffset: -35;
            }

            100% {
                stroke-dasharray: 89, 200;
                stroke-dashoffset: -124;
            }
        }
    </style>
</head>

<body>
    <div id="app">
        <div class="loading-progress-container">
            <svg class="loading-progress">
                <circle cx="40" cy="40" r="35" />
            </svg>
            <div
                style="position: fixed; top: 60%; width: 100%; text-align: center; color: var(--primary-color); font-weight: 500;">
                Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...
            </div>
        </div>
    </div>

    <div id="blazor-error-ui">
        Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹.
        <a href="." class="reload">Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„</a>
        <span class="dismiss">ðŸ—™</span>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="_framework/blazor.webassembly.js"></script>
    <script>
        window.initCategoriesSlider = () => {
            new Swiper('.categories-swiper', {
                slidesPerView: 'auto',
                spaceBetween: 0,
                loop: true,
                grabCursor: true,
                freeMode: {
                    enabled: true,
                    momentumBounce: false,
                    momentumRatio: 1
                },
                speed: 3000,
                autoplay: {
                    delay: 0,
                    disableOnInteraction: false,
                    pauseOnMouseEnter: true
                },
                mousewheel: {
                    forceToAxis: true,
                },
                touchStartPreventDefault: false,
                simulateTouch: true,
                shortSwipes: true,
                longSwipes: true
            });
        };

        // Drag to scroll for category marquee
        window.initCategoryDragScroll = (element) => {
            if (!element) return;

            let isDown = false;
            let startX;
            let scrollLeft;
            let velocity = 0;
            let momentumID;

            element.addEventListener('mousedown', (e) => {
                isDown = true;
                element.style.cursor = 'grabbing';
                startX = e.pageX - element.offsetLeft;
                scrollLeft = element.scrollLeft;
                cancelMomentumTracking();
            });

            element.addEventListener('mouseleave', () => {
                isDown = false;
                element.style.cursor = 'grab';
            });

            element.addEventListener('mouseup', () => {
                isDown = false;
                element.style.cursor = 'grab';
                beginMomentumTracking();
            });

            element.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                const x = e.pageX - element.offsetLeft;
                const walk = (x - startX) * 2;
                const prevScrollLeft = element.scrollLeft;
                element.scrollLeft = scrollLeft - walk;
                velocity = element.scrollLeft - prevScrollLeft;
            });

            // Touch support
            element.addEventListener('touchstart', (e) => {
                isDown = true;
                startX = e.touches[0].pageX - element.offsetLeft;
                scrollLeft = element.scrollLeft;
                cancelMomentumTracking();
            });

            element.addEventListener('touchend', () => {
                isDown = false;
                beginMomentumTracking();
            });

            element.addEventListener('touchmove', (e) => {
                if (!isDown) return;
                const x = e.touches[0].pageX - element.offsetLeft;
                const walk = (x - startX) * 2;
                const prevScrollLeft = element.scrollLeft;
                element.scrollLeft = scrollLeft - walk;
                velocity = element.scrollLeft - prevScrollLeft;
            });

            function beginMomentumTracking() {
                cancelMomentumTracking();
                momentumID = requestAnimationFrame(momentumLoop);
            }

            function cancelMomentumTracking() {
                cancelAnimationFrame(momentumID);
            }

            function momentumLoop() {
                element.scrollLeft -= velocity;
                velocity *= 0.95;
                if (Math.abs(velocity) > 0.5) {
                    momentumID = requestAnimationFrame(momentumLoop);
                }
            }
        };

        // Apply theme colors dynamically
        window.applyThemeColors = (primaryColor, secondaryColor) => {
            if (primaryColor) {
                document.documentElement.style.setProperty('--theme-primary', primaryColor);

                // Convert hex to RGB for glow effect
                const r = parseInt(primaryColor.slice(1, 3), 16);
                const g = parseInt(primaryColor.slice(3, 5), 16);
                const b = parseInt(primaryColor.slice(5, 7), 16);
                document.documentElement.style.setProperty('--theme-primary-rgb', `${r}, ${g}, ${b}`);
                document.documentElement.style.setProperty('--theme-glow', `rgba(${r}, ${g}, ${b}, 0.3)`);
                document.documentElement.style.setProperty('--theme-light', `rgba(${r}, ${g}, ${b}, 0.1)`);
            }

            if (secondaryColor) {
                document.documentElement.style.setProperty('--theme-secondary', secondaryColor);
            }
        };
    </script>
</body>

</html>